{"version":3,"file":"app.js","sourceRoot":"","sources":["../src/app/app.ts","../src/app/states/Boot.ts","../src/app/states/Game.ts","../src/app/states/Preload.ts","../src/main.ts"],"names":[],"mappings":"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","sourcesContent":["namespace app{\r\n\texport class App{\r\n\t\tpublic game:Phaser.Game;\r\n\t\tconstructor(){\r\n\t\t\tthis.game = new Phaser.Game(1024, 768, Phaser.AUTO, 'game');\r\n\t\t\tthis.game.state.add('boot', new states.Boot);\r\n\t\t\tthis.game.state.add('preload', new states.Preload);\r\n\t\t\tthis.game.state.add('game', new states.Game);\r\n\r\n\t\t\tthis.game.state.start('boot');\r\n\t\t}\r\n\t}\r\n}","namespace app.states{\r\n\texport class Boot extends Phaser.State{\r\n\r\n\t\tpublic preload() {\r\n\t\t\tthis.load.image('preloader', 'assets/images/loading_bar.png');\r\n\t\t\tthis.load.image('loading_bg', 'assets/images/loading_bg.jpg');\r\n\t\t}\r\n\r\n\t\tpublic create() {\r\n\t\t\tthis.game.input.maxPointers = 1;\r\n\t\t\tthis.game.state.start('preload');\r\n\t\t}\r\n\r\n\t}\r\n}\r\n","namespace app.states{\r\n\texport class Game extends Phaser.State {\r\n\t\tpulling:boolean;\r\n\t\tlaunched:boolean;\r\n\t\tround:number;\r\n\t\tscore:number;\r\n\t\tbg:Phaser.Sprite;\r\n\t\tforceLine:Phaser.Graphics;\r\n\t\tcomet:Phaser.Sprite;\r\n\t\tasteroids:Phaser.Group;\r\n\t\ttrail:Phaser.Particles.Arcade.Emitter;\r\n\t\ttxtScore:Phaser.Text;\r\n\r\n\t\tconstructor() {\r\n\t\t\t//object level properties\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\t\tcreate() {\r\n\r\n\t\t\t//object level properties\r\n\t\t\tthis.pulling = false;\r\n\t\t\tthis.launched = false;\r\n\t\t\tthis.round = 0;\r\n\t\t\tthis.score = 0;\r\n\r\n\t\t\t//start physics\r\n\t\t\tthis.physics.startSystem(Phaser.Physics.P2JS);\r\n\t\t\tthis.world.setBounds(0, 0, 3000, 768);\r\n\r\n\t\t\t//add game bg\r\n\t\t\tthis.bg = this.add.sprite(0,0,'bg');\r\n\t\t\tthis.bg.fixedToCamera =true;\r\n\r\n\t\t\t//impulse chain\r\n\t\t\tthis.forceLine = this.add.graphics(0,0);\r\n\r\n\t\t\t//create and configure comet\r\n\t\t\tthis.comet = this.add.sprite(300,330,'comet');\r\n\t\t\tthis.comet.anchor.set(.5, .5);\r\n\t\t\tthis.physics.p2.enable(this.comet);\r\n\t\t\tthis.comet.body.setCircle(40, 140, -10);\r\n\t\t\tthis.comet.inputEnabled = true;\r\n\r\n\t\t\t//setup asteroids\r\n\t\t\tthis.asteroids = this.add.group();\r\n\t\t\tthis.asteroids.enableBody = true;\r\n\t\t\tthis.asteroids.physicsBodyType = Phaser.Physics.P2JS;\r\n\r\n\t\t\t//emitter\r\n\t\t\tthis.trail = this.add.emitter(this.comet.x, this.comet.y);\r\n\t\t\tthis.trail.makeParticles(['particle1', 'particle2']);\r\n\t\t\tthis.trail.start(false, 3000, 50);\r\n\t\t\tthis.trail.setAlpha(1, 0, 3000);\r\n\t\t\tthis.trail.setScale(0.4, 1, 0.4, 1, 4000);\r\n\r\n\t\t\t//foreground\r\n\t\t\tthis.add.sprite(0,0, 'fg');\r\n\r\n\t\t\t//Text\r\n\t\t\tvar style = { font: \"30px Arial\", fill: \"#FFF\" };\r\n\t\t\tthis.txtScore = this.add.text(20, 20, \"Round 0, Score 0\", style);\r\n\t\t\tthis.txtScore.fixedToCamera = true;\r\n\r\n\t\t\t//follow that comet\r\n\t\t\tthis.camera.follow(this.comet);\r\n\r\n\t\t\t//setup game board\r\n\t\t\tthis.resetBoard();\r\n\t\t}\r\n\r\n\t\tstartPull() {\r\n\t\t\tthis.pulling = true;\r\n\t\t\tthis.game.input.onUp.addOnce(this.endPull, this);\r\n\t\t}\r\n\r\n\t\tendPull() {\r\n\t\t\tthis.pulling =  false;\r\n\t\t\tthis.launched = true;\r\n\r\n\t\t\tvar forceLine = new Phaser.Line(this.input.activePointer.x, this.input.activePointer.y, this.comet.x, this.comet.y);\r\n\t\t\tthis.comet.body.motionState =  Phaser.Physics.P2.Body.DYNAMIC;\r\n\t\t\tthis.comet.body.velocity.x = Math.cos(forceLine.angle) * forceLine.length * 6;\r\n\t\t\tthis.comet.body.velocity.y = Math.sin(forceLine.angle) * forceLine.length * 2;\r\n\t\t\tthis.forceLine.clear();\r\n\r\n\t\t\tthis.time.events.add(5500, this.resetBoard, this);\r\n\t\t}\r\n\r\n\t\tresetBoard() {\r\n\r\n\t\t\tthis.launched = false;\r\n\r\n\t\t\tthis.comet.body.reset();\r\n\t\t\tthis.comet.body.rotation = 0;\r\n\t\t\tthis.comet.body.motionState =  Phaser.Physics.P2.Body.STATIC;\r\n\t\t\tthis.comet.events.onInputDown.addOnce(this.startPull, this);\r\n\t\t\tthis.comet.body.x = 300;\r\n\t\t\tthis.comet.body.y = 370;\r\n\r\n\t\t\tthis.asteroids.removeAll(true);\r\n\t\t\tthis.asteroids.create(2800, 400, 'asteroid');\r\n\t\t\tthis.asteroids.create(2500, 200, 'asteroid');\r\n\t\t\tthis.asteroids.create(2200, 500, 'asteroid');\r\n\t\t\tthis.asteroids.create(2200, 200, 'asteroid');\r\n\t\t\tthis.asteroids.create(2600, 600, 'asteroid');\r\n\t\t\tthis.asteroids.create(1800, 600, 'asteroid');\r\n\t\t\tthis.asteroids.create(1600, 300, 'asteroid');\r\n\r\n\t\t\tthis.asteroids.forEach(\r\n\t\t\t\tfunction(asteroid:Phaser.Sprite) {\r\n\t\t\t\t\tasteroid.body.mass = .7;\r\n\t\t\t\t\tasteroid.checkWorldBounds = true;\r\n\t\t\t\t\tasteroid.body.setCircle(75);\r\n\t\t\t\t\tasteroid.events.onOutOfBounds.addOnce(this.killedAsteroid, this)\r\n\t\t\t\t},\r\n\t\t\tthis\r\n\t\t\t);\r\n\r\n\t\t\tthis.round ++;\r\n\t\t\tthis.txtScore.text = \"Round: \" + this.round + \" Score: \" + this.score;\r\n\r\n\r\n\t\t}\r\n\r\n\t\tkilledAsteroid() {\r\n\t\t\tthis.score ++;\r\n\t\t}\r\n\r\n\t\tupdate() {\r\n\r\n\t\t\tif(this.pulling ) {\r\n\t\t\t\tthis.forceLine.clear();\r\n\t\t\t\tthis.forceLine.lineStyle(10, 0xffffff, .8);\r\n\t\t\t\tthis.forceLine.moveTo( this.input.activePointer.x, this.input.activePointer.y);\r\n\t\t\t\tthis.forceLine.lineTo(this.comet.x, this.comet.y);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.launched) {\r\n\t\t\t\tthis.comet.body.force.y = 270;\r\n\t\t\t}\r\n\r\n\t\t\tthis.trail.x = this.comet.x;\r\n\t\t\tthis.trail.y = this.comet.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n}","namespace app.states{\r\n\texport class Preload extends Phaser.State {\r\n\t\tasset:Phaser.Sprite;\r\n\t\tready:boolean;\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis.asset = null;\r\n\t\t\tthis.ready = false;\r\n\t\t}\r\n\r\n\t\tpublic preload() {\r\n\t\t}\r\n\r\n\t\tpublic create() {\r\n\r\n\t\t\t//background for game\r\n\t\t\tthis.add.sprite(0,0, \"loading_bg\");\r\n\r\n\t\t\tthis.asset = this.add.sprite(this.game.width/2,this.game.height/2, 'preloader');\r\n\t\t\tthis.asset.anchor.setTo(0.5, 0.5);\r\n\r\n\t\t\tthis.load.onLoadComplete.addOnce(this.onLoadComplete, this);\r\n\t\t\tthis.load.setPreloadSprite(this.asset);\r\n\r\n\t\t\t//do all your loading here\r\n\t\t\t//this.load.image('player', 'assets/images/player.png'); //width and height of sprite\r\n\t\t\tthis.load.image('bg', 'assets/images/smasherBG.jpg');\r\n\t\t\tthis.load.image('particle1', 'assets/images/comet_particle1.png');\r\n\t\t\tthis.load.image('particle2', 'assets/images/comet_particle2.png');\r\n\t\t\tthis.load.image('comet', 'assets/images/comet.png');\r\n\t\t\tthis.load.image('asteroid', 'assets/images/asteroid.png');\r\n\t\t\tthis.load.image('fg', 'assets/images/smasherForeground.png');\r\n\r\n\r\n\t\t\t//staaaart load\r\n\t\t\tthis.load.start();\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tif(this.ready) {\r\n\t\t\t\tthis.game.state.start('game');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprotected onLoadComplete() {\r\n\t\t\tthis.ready = true;\r\n\t\t}\r\n\t}\r\n}","var game = new app.App();"]}